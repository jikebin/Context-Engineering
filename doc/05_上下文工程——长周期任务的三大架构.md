# 上周期任务的三大架构

构建Agent的 “长期记忆” 与 “协同智能”

当任务复杂度远超单个上下文窗口时，我们需要借鉴人类 处理复杂信息的方式：压缩、结构化笔记、sub-agent架构。

## 上任务问题本质

- 上下文窗口有限
- 信息越多越容易腐烂
- AI需要在长时间跨度中维持连贯的目标

## 压缩（Compaction）

- 核心类比：AI为自己写会议纪要。
- **机制**：当上下文接近饱和时，通过“元调用”让模型自身对历史进行高保真总结，形成摘要。
- **作用**：管理“工作记忆”，在不丢失核心信息的前提下，为新信息腾出空间。
- **适用**：高连贯性的对话流任务。

## 结构化笔记

- 核心类比：为AI配备外部大脑
- **机制**：赋予Agent读写外部文件或数据库的工具，使其主动记录关键决策与状态。
- **作用**：构建“持久化记忆”，实现跨回话、跨周期的知识积累和状态恢复。
- **适用**：有明确里程碑的迭代式任务。

## Sub-Agent架构

- 核心类比：AI组建自己的专家团队
- **机制**：由“主Agent"规划分解，将子任务分派给多个 并行的“专家子Agent”处理。
- **作用**：实现“关注点分离”，通过分而治之，解决单一Agent无法处理的规模化复杂性。
- **适用**：可并行探索的复杂研究分析。

## 组合应用

- 在真实的顶级应用中，三种策略往往是组合使用的。
- 一个复杂的Agent系统，其认知架构可能如下：
  - 主Agent通过【Sub-Agent】分派任务...
  - ...同时通过【结构化笔记】跟踪全局进度和持久化记忆...
  - ...并在与用户的长对话中，使用【压缩】策略来管理其工作记忆。

**真正的自主智能，源于记忆、规划与协同的能力。**
这需要的是架构，而不仅仅是算法。