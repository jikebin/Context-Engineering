# 上下文缩减(Context Reduction) 新视角

可逆 vs 不可逆

## 压缩(Compaction)

原理：一种可逆的、无损的外部化。去除任何可以从文件系统或外部状体中重建的信息，用一个轻量级的“指针”代替。

```md
示例1(写文件)：{path,content} -> {path}
示例2(浏览器)：网页全文HTML -> URL
```

核心价值：100%信息保真

## 摘要(Summarization)

定位：当“压缩”收益过小时，才启用的有损、不可逆操作。

```md
Manus的新实践：先卸载，再摘要

在执行摘要之前，先将即将被总结的完整上下文历史，作为一个整体写入到一个日志文件中。

这相当于为“不可逆”操作买了一份“保险”，确保原始信息永远可以回溯。
```

核心风险：仍可能丢失细节

## 上下文缩减(Reduction)工程实践

### 1.触发器：“前腐烂阈值(Pre-rot threshold)”

这不是模型的硬性上限，而是其**性能开始显著下降**的点（通常在128k-200k）,是触发上下文缩减(Context Reduction)的“警报线”。

### 2.分步执行，优先级明确

* 第一步：优先且反复使用“压缩(Compaction)”.当上下文触及“警报线”时，系统手续爱你尝试用此操作。
* 第二步：当“压缩”收益过小时，才使用“摘要(Summarization)”。只有在这种情况下，系统才会启用“摘要”这个大招。

### 3.两个至关重要的执行细节

* 保留Few-shot示例：执行“压缩”时，只对最旧50%历史操作，并保留最新的工具调用记录的完整格式。这能为模型提供新鲜的Few-shot示例，防止它模仿并输出错误的紧凑格式。
* 摘要的数据源与平滑过渡：执行“摘要”时，必须基于完整版本的数据进行提炼（而非已压缩版）。同时，也要**保留最后几个工具调用的完整细节**，让模型知道它从哪里中断，从而平滑地继续任务。

